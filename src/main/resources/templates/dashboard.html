<!DOCTYPE html>
<html xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      xmlns:th="http://www.thymeleaf.org"
      lang="en">
<head>
    <meta charset="UTF-8">
    <title>Jinba - Dashboard</title>
    <link rel="stylesheet" th:href="@{/css/coreui/coreui.min.css}">
</head>
<body class="bg-light min-vh-100">
  <header th:replace="~{fragments/nav.html :: nav}"></header>

  <div class="container mt-3">
      <div class="row">
          <div class="col-3">
              <div class="row">
                  <div class="card">
                      <div class="card-body">
                          <div class="avatar bg-primary text-white mb-3" style="position: relative; width: 100%; height: 0; padding-bottom: 100%">
                              <h1 style="position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);">
                                  <span th:text="${profile.firstName.toUpperCase().charAt(0)}"></span>
                                  <span th:text="${profile.lastName.toUpperCase().charAt(0)}"></span>
                              </h1>
                          </div>
                          <div>
                              <h2><span th:text="${profile.firstName}"></span> <span th:text="${profile.lastName}"></span></h2>
                              <p>Email: <span th:text="${profile.email}"></span></p>
                          </div>
                          <div class="d-flex justify-content-center align-items-center">
                              <a th:href="@{/profile/edit}" class="btn btn-primary">Edit Profile</a>
                          </div>
                      </div>
                  </div>
              </div>
              <div class="row mt-3" sec:authorize="hasRole('DEFAULT_USER')">
                  <div class="card">
                      <div class="card-body">
                          <h2>Open Applications</h2>
                          <div th:if="${profile.jobApplications.isEmpty()}" class="alert alert-danger alert-dismissible fade show">
                              <span>You don't have any open Job Applications.</span>
                          </div>
                          <hr>
                          <div class="container">
                              <div th:each="jobApplication : ${profile.jobApplications}" class="row mb-2">
                                  <div class="col-6 d-flex align-items-center justify-content-start flex-row">
                                      <span th:text="${jobApplication.jobOffer.title}"></span>
                                  </div>
                                  <div class="col-3 d-flex align-items-center justify-content-end flex-row">
                                      <span class="text-muted" th:text="${jobApplication.status}"></span>
                                  </div>
                                  <div class="col-3 d-flex align-items-center justify-content-end flex-row">
                                      <a class="me-1 btn btn-outline-secondary" th:href="'/offer/' + ${jobApplication.jobOffer.id}">Go</a>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <div class="col-9">
              <div class="card">
                  <div th:if="${profile.role.equals(T(de.jinba.server.entity.enumuration.Role).COMPANY_USER)}">
                      <div class="card-body">
                          <div class="row">
                              <div class="col">
                                  <div th:each="app : ${applicationsList}" th:if="${app.status.equals(T(de.jinba.server.entity.enumuration.ApplicationStatus).PENDING)}">
                                    <p th:text="${app.id}"></p>
                                  </div>
                              </div>
                              <div class="col">
                                  Accepted
                              </div>
                              <div class="col">
                                  Declined
                              </div>
                          </div>

                      </div>
                  </div>
                  <div th:if="${profile.role.equals(T(de.jinba.server.entity.enumuration.Role).DEFAULT_USER)}" class="card-body">
                      JOBSUCHE
                  </div>
              </div>
          </div>
      </div>
  </div>

<script th:src="@{/js/coreui/popper.min.js}" type="text/javascript"></script>
<script th:src="@{/js/coreui/coreui.min.js}" type="text/javascript"></script>
</body>
</html>